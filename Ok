-- UI Library Roblox Executor - Dark White Theme Siêu Đẹp & Xịn Sò
-- Màu chủ đạo: Đen (#0A0A0A - #1E1E1E) hòa quyện trắng (#FFFFFF) với gradient mượt mà
-- Tính năng: Draggable, Tabs, Sections, Buttons (hover/click anim), Toggles (switch anim), Sliders (drag anim)
-- Toggle UI bằng phím INSERT
-- Paste vào executor để dùng!

local Library = {}
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ExecutorUILib"
ScreenGui.ResetOnSpawn = false
ScreenGui.DisplayOrder = 999
ScreenGui.Parent = CoreGui

local Theme = {
    Bg1 = Color3.fromRGB(15, 15, 15),
    Bg2 = Color3.fromRGB(30, 30, 30),
    Bg3 = Color3.fromRGB(20, 20, 20),
    Dark = Color3.fromRGB(10, 10, 10),
    Gray = Color3.fromRGB(60, 60, 60),
    Accent = Color3.fromRGB(255, 255, 255),
    Text = Color3.fromRGB(240, 240, 240),
    MuteText = Color3.fromRGB(160, 160, 160)
}

local Windows = {}

-- Helper Functions
local function MakeCorner(parent, radius)
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, radius or 8)
    corner.Parent = parent
    return corner
end

local function MakeStroke(parent, color, thickness)
    local stroke = Instance.new("UIStroke")
    stroke.Color = color or Theme.Accent
    stroke.Thickness = thickness or 1
    stroke.Transparency = 0.5
    stroke.Parent = parent
    return stroke
end

local function MakeGradient(parent, color1, color2, rotation)
    local grad = Instance.new("UIGradient")
    grad.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, color1),
        ColorSequenceKeypoint.new(1, color2)
    })
    grad.Rotation = rotation or 45
    grad.Parent = parent
    return grad
end

local function Tween(obj, info, properties)
    local tween = TweenService:Create(obj, info or TweenInfo.new(0.2, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), properties)
    tween:Play()
    return tween
end

-- Create Window
function Library:CreateWindow(options)
    options = options or {}
    local name = options.Name or "Executor UI"
    local sizeX, sizeY = options.SizeX or 650, options.SizeY or 450

    local Window = {}
    local MainFrame = Instance.new("Frame")
    MainFrame.Name = name
    MainFrame.Size = UDim2.new(0, sizeX, 0, sizeY)
    MainFrame.Position = UDim2.new(0.5, -sizeX/2, 0.5, -sizeY/2)
    MainFrame.BackgroundTransparency = 1
    MainFrame.ClipsDescendants = true
    MainFrame.Parent = ScreenGui

    -- Shadow Effect
    local Shadow = Instance.new("Frame")
    Shadow.Name = "Shadow"
    Shadow.Size = UDim2.new(1, 24, 1, 24)
    Shadow.Position = UDim2.new(0, -12, 0, -12)
    Shadow.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    Shadow.BackgroundTransparency = 0.8
    Shadow.ZIndex = -1
    MakeCorner(Shadow, 16)
    Shadow.Parent = MainFrame

    -- Main Background
    local Bg = Instance.new("Frame")
    Bg.Name = "Background"
    Bg.Size = UDim2.new(1, 0, 1, 0)
    Bg.BackgroundColor3 = Theme.Bg1
    Bg.BorderSizePixel = 0
    Bg.Parent = MainFrame
    MakeCorner(Bg, 16)
    MakeStroke(Bg, Theme.Accent, 1)
    MakeGradient(Bg, Theme.Bg1, Theme.Bg2, 135)

    -- Header
    local Header = Instance.new("Frame")
    Header.Name = "Header"
    Header.Size = UDim2.new(1, 0, 0, 55)
    Header.BackgroundTransparency = 1
    Header.Parent = Bg

    local HeaderGrad = Instance.new("UIGradient")
    HeaderGrad.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, Theme.Bg3),
        ColorSequenceKeypoint.new(1, Theme.Dark)
    })
    HeaderGrad.Rotation = 90
    HeaderGrad.Parent = Header
    MakeCorner(Header, 16)

    local Title = Instance.new("TextLabel")
    Title.Name = "Title"
    Title.Size = UDim2.new(1, -100, 1, 0)
    Title.Position = UDim2.new(0, 20, 0, 0)
    Title.BackgroundTransparency = 1
    Title.Text = name
    Title.TextColor3 = Theme.Accent
    Title.TextSize = 18
    Title.Font = Enum.Font.GothamBold
    Title.TextXAlignment = Enum.TextXAlignment.Left
    Title.TextStrokeTransparency = 0.8
    Title.Parent = Header

    -- Minimize & Close Buttons
    local MinimizeBtn = Instance.new("TextButton")
    MinimizeBtn.Name = "Minimize"
    MinimizeBtn.Size = UDim2.new(0, 30, 0, 30)
    MinimizeBtn.Position = UDim2.new(1, -65, 0.5, -15)
    MinimizeBtn.BackgroundColor3 = Theme.Gray
    MinimizeBtn.Text = "-"
    MinimizeBtn.TextColor3 = Theme.Accent
    MinimizeBtn.TextSize = 20
    MinimizeBtn.Font = Enum.Font.GothamBold
    MinimizeBtn.Parent = Header
    MakeCorner(MinimizeBtn, 6)
    MakeStroke(MinimizeBtn)

    local CloseBtn = Instance.new("TextButton")
    CloseBtn.Name = "Close"
    CloseBtn.Size = UDim2.new(0, 30, 0, 30)
    CloseBtn.Position = UDim2.new(1, -30, 0.5, -15)
    CloseBtn.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
    CloseBtn.Text = "×"
    CloseBtn.TextColor3 = Theme.Accent
    CloseBtn.TextSize = 20
    CloseBtn.Font = Enum.Font.GothamBold
    CloseBtn.Parent = Header
    MakeCorner(CloseBtn, 6)
    MakeStroke(CloseBtn)

    -- Tab Bar
    local TabBar = Instance.new("Frame")
    TabBar.Name = "TabBar"
    TabBar.Size = UDim2.new(1, -20, 0, 45)
    TabBar.Position = UDim2.new(0, 10, 0, 60)
    TabBar.BackgroundColor3 = Theme.Dark
    TabBar.BorderSizePixel = 0
    TabBar.Parent = Bg
    MakeCorner(TabBar, 10)
    MakeStroke(TabBar, Theme.Gray, 1)

    local TabLayout = Instance.new("UIListLayout")
    TabLayout.FillDirection = Enum.FillDirection.Horizontal
    TabLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
    TabLayout.VerticalAlignment = Enum.VerticalAlignment.Center
    TabLayout.Padding = UDim.new(0, 12)
    TabLayout.Parent = TabBar

    -- Content Area
    local ContentFrame = Instance.new("Frame")
    ContentFrame.Name = "Content"
    ContentFrame.Size = UDim2.new(1, -20, 1, -120)
    ContentFrame.Position = UDim2.new(0, 10, 0, 110)
    ContentFrame.BackgroundTransparency = 1
    ContentFrame.Parent = Bg

    local ActiveTab = nil

    -- Draggable
    local dragging, dragStart, startPos
    Header.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = MainFrame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)

    -- Minimize/Close
    local minimized = false
    MinimizeBtn.MouseButton1Click:Connect(function()
        minimized = not minimized
        ContentFrame.Visible = not minimized
        TabBar.Visible = not minimized
        MinimizeBtn.Text = minimized and "+" or "-"
        Tween(MainFrame, TweenInfo.new(0.3), {Size = minimized and UDim2.new(0, sizeX, 0, 55) or UDim2.new(0, sizeX, 0, sizeY)})
    end)

    CloseBtn.MouseButton1Click:Connect(function()
        ScreenGui:Destroy()
    end)

    -- Create Tab
    function Window:CreateTab(name, icon)
        local Tab = {}
        local TabButton = Instance.new("TextButton")
        TabButton.Name = name .. "Tab"
        TabButton.Size = UDim2.new(0, 120, 1, -8)
        TabButton.BackgroundTransparency = 1
        TabButton.Text = icon and icon .. " " .. name or name
        TabButton.TextColor3 = Theme.Text
        TabButton.TextSize = 14
        TabButton.Font = Enum.Font.GothamSemibold
        TabButton.TextXAlignment = Enum.TextXAlignment.Center
        TabButton.Parent = TabBar

        local TabContent = Instance.new("ScrollingFrame")
        TabContent.Name = name .. "Content"
        TabContent.Size = UDim2.new(1, 0, 1, 0)
        TabContent.BackgroundTransparency = 1
        TabContent.BorderSizePixel = 0
        TabContent.ScrollBarThickness = 4
        TabContent.ScrollBarImageColor3 = Theme.Gray
        TabContent.ScrollBarImageTransparency = 0.5
        TabContent.CanvasSize = UDim2.new(0, 0, 0, 0)
        TabContent.Visible = false
        TabContent.Parent = ContentFrame

        local TabListLayout = Instance.new("UIListLayout")
        TabListLayout.FillDirection = Enum.FillDirection.Vertical
        TabListLayout.SortOrder = Enum.SortOrder.LayoutOrder
        TabListLayout.Padding = UDim.new(0, 10)
        TabListLayout.Parent = TabContent
        TabListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
            TabContent.CanvasSize = UDim2.new(0, 0, 0, TabListLayout.AbsoluteContentSize.Y + 20)
        end)

        local Indicator = Instance.new("Frame")
        Indicator.Name = "Indicator"
        Indicator.Size = UDim2.new(0, 3, 0.6, 0)
        Indicator.Position = UDim2.new(0, -2, 0.2, 0)
        Indicator.BackgroundColor3 = Theme.Accent
        Indicator.BackgroundTransparency = 0.3
        Indicator.BorderSizePixel = 0
        MakeCorner(Indicator, 1.5)
        Indicator.Parent = TabButton

        local function SelectTab()
            if ActiveTab then
                ActiveTab.Visible = false
                Tween(ActiveTab.Parent:FindFirstChild(ActiveTab.Name:gsub("Content", "Tab")).Indicator, TweenInfo.new(0.2), {BackgroundTransparency = 0.3})
                Tween(ActiveTab.Parent:FindFirstChild(ActiveTab.Name:gsub("Content", "Tab")), TweenInfo.new(0.2), {TextColor3 = Theme.Text})
            end
            TabContent.Visible = true
            ActiveTab = TabContent
            Tween(Indicator, TweenInfo.new(0.2), {BackgroundTransparency = 0, Size = UDim2.new(0, 4, 0.8, 0)})
            Tween(TabButton, TweenInfo.new(0.2), {TextColor3 = Theme.Accent})
        end

        TabButton.MouseButton1Click:Connect(SelectTab)
        TabButton.MouseEnter:Connect(function()
            if TabContent.Visible ~= true then
                Tween(TabButton, TweenInfo.new(0.15), {TextColor3 = Theme.Accent})
            end
        end)
        TabButton.MouseLeave:Connect(function()
            if TabContent.Visible ~= true then
                Tween(TabButton, TweenInfo.new(0.15), {TextColor3 = Theme.Text})
            end
        end)

        if not ActiveTab then SelectTab() end

        -- Add Section
        function Tab:AddSection(name)
            local Section = {}
            local SecFrame = Instance.new("Frame")
            SecFrame.Name = name .. "Section"
            SecFrame.BackgroundColor3 = Theme.Dark
            SecFrame.BorderSizePixel = 0
            SecFrame.Size = UDim2.new(1, -24, 0, 50)
            SecFrame.Parent = TabContent
            MakeCorner(SecFrame, 12)
            MakeStroke(SecFrame, Theme.Gray, 1)
            MakeGradient(SecFrame, Theme.Dark, Color3.fromRGB(25, 25, 25))

            local SecTitle = Instance.new("TextLabel")
            SecTitle.Size = UDim2.new(1, 0, 0, 35)
            SecTitle.Position = UDim2.new(0, 15, 0, 5)
            SecTitle.BackgroundTransparency = 1
            SecTitle.Text = name
            SecTitle.TextColor3 = Theme.Accent
            SecTitle.TextSize = 15
            SecTitle.Font = Enum.Font.GothamBold
            SecTitle.TextXAlignment = Enum.TextXAlignment.Left
            SecTitle.Parent = SecFrame

            local SecContent = Instance.new("Frame")
            SecContent.Name = "Content"
            SecContent.Size = UDim2.new(1, -20, 1, -45)
            SecContent.Position = UDim2.new(0, 10, 0, 40)
            SecContent.BackgroundTransparency = 1
            SecContent.Parent = SecFrame

            local SecLayout = Instance.new("UIListLayout")
            SecLayout.FillDirection = Enum.FillDirection.Vertical
            SecLayout.SortOrder = Enum.SortOrder.LayoutOrder
            SecLayout.Padding = UDim.new(0, 8)
            SecLayout.Parent = SecContent

            -- Add Button
            function Section:AddButton(text, callback)
                local Button = Instance.new("TextButton")
                Button.Size = UDim2.new(1, 0, 0, 38)
                Button.BackgroundColor3 = Theme.Bg2
                Button.BorderSizePixel = 0
                Button.Text = text
                Button.TextColor3 = Theme.Text
                Button.TextSize = 14
                Button.Font = Enum.Font.GothamSemibold
                Button.Parent = SecContent
                MakeCorner(Button, 8)
                MakeStroke(Button, Theme.Gray, 1)

                Button.MouseEnter:Connect(function()
                    Tween(Button, TweenInfo.new(0.2), {BackgroundColor3 = Theme.Gray, Size = UDim2.new(1, 0, 0, 40)})
                    Tween(Button:FindFirstChild("UIStroke"), TweenInfo.new(0.2), {Color = Theme.Accent, Thickness = 1.8})
                end)
                Button.MouseLeave:Connect(function()
                    Tween(Button, TweenInfo.new(0.2), {BackgroundColor3 = Theme.Bg2, Size = UDim2.new(1, 0, 0, 38)})
                    Tween(Button:FindFirstChild("UIStroke"), TweenInfo.new(0.2), {Color = Theme.Gray, Thickness = 1})
                end)
                Button.MouseButton1Click:Connect(function()
                    Tween(Button, TweenInfo.new(0.1, Enum.EasingStyle.Back), {Size = UDim2.new(1, -6, 0, 36)})
                    wait(0.12)
                    Tween(Button, TweenInfo.new(0.1, Enum.EasingStyle.Back), {Size = UDim2.new(1, 0, 0, 38)})
                    callback()
                end)
                return Button
            end

            -- Add Toggle
            function Section:AddToggle(text, default, callback)
                default = default or false
                local Toggle = {Value = default}
                local Frame = Instance.new("Frame")
                Frame.Size = UDim2.new(1, 0, 0, 42)
                Frame.BackgroundTransparency = 1
                Frame.Parent = SecContent

                local Label = Instance.new("TextLabel")
                Label.Size = UDim2.new(1, -70, 1, 0)
                Label.Position = UDim2.new(0, 15, 0, 0)
                Label.BackgroundTransparency = 1
                Label.Text = text
                Label.TextColor3 = Theme.Text
                Label.TextSize = 14
                Label.Font = Enum.Font.Gotham
                Label.TextXAlignment = Enum.TextXAlignment.Left
                Label.Parent = Frame

                local SwitchBg = Instance.new("Frame")
                SwitchBg.Size = UDim2.new(0, 50, 0, 24)
                SwitchBg.Position = UDim2.new(1, -65, 0.5, -12)
                SwitchBg.BackgroundColor3 = Theme.Dark
                SwitchBg.BorderSizePixel = 0
                MakeCorner(SwitchBg, 12)
                SwitchBg.Parent = Frame
                MakeStroke(SwitchBg, Theme.Gray, 1.2)

                local SwitchKnob = Instance.new("Frame")
                SwitchKnob.Size = UDim2.new(0, 20, 0, 20)
                SwitchKnob.Position = UDim2.new(0, 2, 0.5, -10)
                SwitchKnob.BackgroundColor3 = Theme.MuteText
                SwitchKnob.BorderSizePixel = 0
                MakeCorner(SwitchKnob, 10)
                SwitchKnob.Parent = SwitchBg

                local function Set(state)
                    Toggle.Value = state
                    if state then
                        Tween(SwitchBg, TweenInfo.new(0.25, Enum.EasingStyle.Quint), {BackgroundColor3 = Theme.Accent})
                        Tween(SwitchKnob, TweenInfo.new(0.25, Enum.EasingStyle.Quint), {Position = UDim2.new(1, -22, 0.5, -10), BackgroundColor3 = Theme.Accent})
                    else
                        Tween(SwitchBg, TweenInfo.new(0.25, Enum.EasingStyle.Quint), {BackgroundColor3 = Theme.Dark})
                        Tween(SwitchKnob, TweenInfo.new(0.25, Enum.EasingStyle.Quint), {Position = UDim2.new(0, 2, 0.5, -10), BackgroundColor3 = Theme.MuteText})
                    end
                    callback(state)
                end

                SwitchBg.InputBegan:Connect(function(inp)
                    if inp.UserInputType == Enum.UserInputType.MouseButton1 then
                        Set(not Toggle.Value)
                    end
                end)

                if default then Set(true) end
                return Toggle
            end

            -- Add Slider
            function Section:AddSlider(text, min, max, default, callback, format)
                format = format or ""
                default = math.clamp(default or min, min, max)
                local Slider = {Value = default}
                local Frame = Instance.new("Frame")
                Frame.Size = UDim2.new(1, 0, 0, 55)
                Frame.BackgroundTransparency = 1
                Frame.Parent = SecContent

                local Label = Instance.new("TextLabel")
                Label.Size = UDim2.new(1, -15, 0, 25)
                Label.Position = UDim2.new(0, 15, 0, 0)
                Label.BackgroundTransparency = 1
                Label.Text = text .. ": " .. default .. format
                Label.TextColor3 = Theme.Text
                Label.TextSize = 14
                Label.Font = Enum.Font.Gotham
                Label.TextXAlignment = Enum.TextXAlignment.Left
                Label.Parent = Frame

                local SliderBg = Instance.new("Frame")
                SliderBg.Size = UDim2.new(1, -30, 0, 8)
                SliderBg.Position = UDim2.new(0, 15, 0, 35)
                SliderBg.BackgroundColor3 = Theme.Dark
                SliderBg.BorderSizePixel = 0
                MakeCorner(SliderBg, 4)
                SliderBg.Parent = Frame
                MakeStroke(SliderBg, Theme.Gray)

                local SliderFill = Instance.new("Frame")
                SliderFill.Size = UDim2.new((default - min)/(max - min), 0, 1, 0)
                SliderFill.BackgroundColor3 = Theme.Accent
                SliderFill.BorderSizePixel = 0
                MakeCorner(SliderFill, 4)
                SliderFill.Parent = SliderBg

                local draggingSlider = false
                SliderBg.InputBegan:Connect(function(inp)
                    if inp.UserInputType == Enum.UserInputType.MouseButton1 then
                        draggingSlider = true
                    end
                end)
                UserInputService.InputEnded:Connect(function(inp)
                    if inp.UserInputType == Enum.UserInputType.MouseButton1 then
                        draggingSlider = false
                    end
                end)
                UserInputService.InputChanged:Connect(function(inp)
                    if draggingSlider and inp.UserInputType == Enum.UserInputType.MouseMovement then
                        local percent = math.clamp((inp.Position.X - SliderBg.AbsolutePosition.X) / SliderBg.AbsoluteSize.X, 0, 1)
                        local value = math.floor(min + (max - min) * percent)
                        Slider.Value = value
                        Label.Text = text .. ": " .. value .. format
                        Tween(SliderFill, TweenInfo.new(0.15), {Size = UDim2.new(percent, 0, 1, 0)})
                        callback(value)
                    end
                end)

                Tween(SliderFill, TweenInfo.new(0.5, Enum.EasingStyle.Quint), {Size = UDim2.new((default - min)/(max - min), 0, 1, 0)})
                return Slider
            end

            return Section
        end

        return Tab
    end

    table.insert(Windows, MainFrame)
    return Window
end

-- Toggle UI với phím INSERT
UserInputService.InputBegan:Connect(function(input, gpe)
    if gpe then return end
    if input.KeyCode == Enum.KeyCode.Insert then
        ScreenGui.Enabled = not ScreenGui.Enabled
    end
end)

-- Notify Function Bonus (tùy chọn)
function Library:Notify(title, text, duration)
    duration = duration or 3
    local Notif = Instance.new("Frame")
    Notif.Size = UDim2.new(0, 300, 0, 80)
    Notif.Position = UDim2.new(0, 20, 0, 20)
    Notif.BackgroundColor3 = Theme.Bg2
    Notif.Parent = ScreenGui
    MakeCorner(Notif, 10)
    MakeStroke(Notif, Theme.Accent)
    MakeGradient(Notif, Theme.Bg2, Theme.Bg3)

    local NotifTitle = Instance.new("TextLabel")
    NotifTitle.Size = UDim2.new(1, -20, 0, 25)
    NotifTitle.Position = UDim2.new(0, 15, 0, 10)
    NotifTitle.BackgroundTransparency = 1
    NotifTitle.Text = title
    NotifTitle.TextColor3 = Theme.Accent
    NotifTitle.TextSize = 16
    NotifTitle.Font = Enum.Font.GothamBold
    NotifTitle.Parent = Notif

    local NotifText = Instance.new("TextLabel")
    NotifText.Size = UDim2.new(1, -20, 0, 20)
    NotifText.Position = UDim2.new(0, 15, 0, 35)
    NotifText.BackgroundTransparency = 1
    NotifText.Text = text
    NotifText.TextColor3 = Theme.Text
    NotifText.TextSize = 13
    NotifText.Font = Enum.Font.Gotham
    NotifText.TextXAlignment = Enum.TextXAlignment.Left
    NotifText.Parent = Notif

    Tween(Notif, TweenInfo.new(0.5, Enum.EasingStyle.Back), {Position = UDim2.new(0, 20, 0, 20)})
    game:GetService("Debris"):AddItem(Notif, duration)
    Tween(Notif, TweenInfo.new(0.5, Enum.EasingStyle.Quart), {Position = UDim2.new(0, -320, 0, 20)}):Play()
end

return Library
